'use strict';

angular.module('terminatorApp').service('ProjectsSvc', function ($http, $q) {

  this.getProjects = function () {

    var defer = $q.defer();

    $http({
      method: "GET",
      url: "/api/project"
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.getOneProject = function (id) {

    var defer = $q.defer();

    $http({
      method: "GET",
      url: "/api/project/" + id
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.getProjectTask = function (id) {

    var defer = $q.defer();

    $http({
      method: "GET",
      url: "/api/tasks/project/" + id
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postProject = function () {
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/project",
      data: {}
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postSingleProject = function (newSingleProject) {
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/project",
      data: newSingleProject
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postIntervalProject = function (newSingleProject) {
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/project",
      data: newSingleProject
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.activateTemplates = function (id, description) {
    var defer = $q.defer();
    $http({
      method: "POST",
      url: "/api/project/" + id,
      data: {
        description: description
      }
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.deleteProject = function (id) {
    var defer = $q.defer();

    $http({
      method: "DELETE",
      url: "/api/project/" + id
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  ///////////////
  //Templates
  ///////////////

  this.postTemplate = function (newTemplate) {
    console.log('newTemplate', newTemplate);
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/template",
      data: newTemplate
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.getTemplates = function () {

    var defer = $q.defer();

    $http({
      method: "GET",
      url: "/api/template"
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postTasks = function (newTasksArr, id) {
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/template/tasks",
      data: newTasksArr
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.getTemplateTasks = function (id) {
    var defer = $q.defer();

    $http({
      method: "GET",
      url: "/api/tasks/template/" + id
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });
  };

  ///////////
  //Scheduled
  //////////

  this.postRecurringProject = function (newRecurringForm) {
    console.log('FORM', newRecurringForm);
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/template",
      data: newRecurringForm
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postSingleProject = function (singleProject) {
    console.log(singleProject);
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/singleproject",
      data: singleProject
    }).then(function (response) {
      defer.resolve(response);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.postTriggeredTemplate = function (newTriggeredForm) {
    var defer = $q.defer();

    $http({
      method: "POST",
      url: "/api/template",
      data: newTriggeredForm
    }).then(function (response) {
      console.log(response);
      defer.resolve(response.data);
    }, function (error) {
      console.log("error: ", error);
    });

    return defer.promise;
  };

  this.startProject = function (templateid) {
    var deferred = $q.defer();
    $http({
      method: "POST",
      url: "/api/project/" + templateid
    }).then(function (res) {
      console.log(res);
      deferred.resolve(res.data);
    }).catch(function (err) {
      console.log("ERROR STARTING PROJECT!");
    });
    return deferred.promise;
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpYy9zZXJ2aWNlcy9Qcm9qZWN0c1N2Yy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxVQUFTLEtBQUssRUFBRSxFQUFFLEVBQUU7O0FBRXpFLE1BQUksQ0FBQyxXQUFXLEdBQUcsWUFBWTs7QUFFN0IsUUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDOztBQUV2QixTQUFLLENBQUM7QUFDSixZQUFNLEVBQUUsS0FBSztBQUNiLFNBQUcsRUFBRSxjQUFjO0tBQ3BCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDekIsV0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN6QixFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQ2xCLGFBQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQy9CLENBQUMsQ0FBQzs7QUFFSCxXQUFPLEtBQUssQ0FBQyxPQUFPLENBQUM7R0FDdEIsQ0FBQzs7QUFFRixNQUFJLENBQUMsYUFBYSxHQUFHLFVBQVUsRUFBRSxFQUFFOztBQUVqQyxRQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7O0FBRXZCLFNBQUssQ0FBQztBQUNKLFlBQU0sRUFBRSxLQUFLO0FBQ2IsU0FBRyxFQUFFLGVBQWUsR0FBRyxFQUFFO0tBQzFCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxRQUFRLEVBQUU7QUFDekIsV0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN6QixFQUFFLFVBQVUsS0FBSyxFQUFFO0FBQ2xCLGFBQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQy9CLENBQUMsQ0FBQzs7QUFFSCxXQUFPLEtBQUssQ0FBQyxPQUFPLENBQUM7R0FDdEIsQ0FBQzs7QUFFRixN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TyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM1QixDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsR0FBRyxFQUFHO0FBQ2QsYUFBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0tBQ3hDLENBQUMsQ0FBQztBQUNILFdBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQztHQUN6QixDQUFDO0NBSUgsQ0FBQyxDQUFDIiwiZmlsZSI6InB1YmxpYy9zZXJ2aWNlcy9Qcm9qZWN0c1N2Yy5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCd0ZXJtaW5hdG9yQXBwJykuc2VydmljZSgnUHJvamVjdHNTdmMnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcblxuICB0aGlzLmdldFByb2plY3RzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIHVybDogXCIvYXBpL3Byb2plY3RcIlxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuZ2V0T25lUHJvamVjdCA9IGZ1bmN0aW9uIChpZCkge1xuXG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIHVybDogXCIvYXBpL3Byb2plY3QvXCIgKyBpZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuZ2V0UHJvamVjdFRhc2sgPSBmdW5jdGlvbiAoaWQpIHtcblxuICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICB1cmw6IFwiL2FwaS90YXNrcy9wcm9qZWN0L1wiICsgaWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgfTtcblxuICB0aGlzLnBvc3RQcm9qZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBcIi9hcGkvcHJvamVjdFwiLFxuICAgICAgZGF0YToge31cbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgfTtcblxuICB0aGlzLnBvc3RTaW5nbGVQcm9qZWN0ID0gZnVuY3Rpb24gKG5ld1NpbmdsZVByb2plY3QpIHtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIHVybDogXCIvYXBpL3Byb2plY3RcIixcbiAgICAgIGRhdGE6IG5ld1NpbmdsZVByb2plY3RcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgfTtcblxuICB0aGlzLnBvc3RJbnRlcnZhbFByb2plY3QgPSBmdW5jdGlvbiAobmV3U2luZ2xlUHJvamVjdCkge1xuICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBcIi9hcGkvcHJvamVjdFwiLFxuICAgICAgZGF0YTogbmV3U2luZ2xlUHJvamVjdFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuYWN0aXZhdGVUZW1wbGF0ZXMgPSBmdW5jdGlvbiAoaWQsIGRlc2NyaXB0aW9uKSB7XG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBcIi9hcGkvcHJvamVjdC9cIiArIGlkLFxuICAgICAgZGF0YToge1xuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICB9XG4gICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yOiBcIiwgZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gIH07XG5cbiAgdGhpcy5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIHVybDogXCIvYXBpL3Byb2plY3QvXCIgKyBpZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIC8vLy8vLy8vLy8vLy8vL1xuICAvL1RlbXBsYXRlc1xuICAvLy8vLy8vLy8vLy8vLy9cblxuICB0aGlzLnBvc3RUZW1wbGF0ZSA9IGZ1bmN0aW9uIChuZXdUZW1wbGF0ZSkge1xuICAgIGNvbnNvbGUubG9nKCduZXdUZW1wbGF0ZScsIG5ld1RlbXBsYXRlKTtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIHVybDogXCIvYXBpL3RlbXBsYXRlXCIsXG4gICAgICBkYXRhOiBuZXdUZW1wbGF0ZVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuZ2V0VGVtcGxhdGVzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIHVybDogXCIvYXBpL3RlbXBsYXRlXCJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgfTtcblxuICB0aGlzLnBvc3RUYXNrcyA9IGZ1bmN0aW9uIChuZXdUYXNrc0FyciwgaWQpIHtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIHVybDogXCIvYXBpL3RlbXBsYXRlL3Rhc2tzXCIsXG4gICAgICBkYXRhOiBuZXdUYXNrc0FyclxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuZ2V0VGVtcGxhdGVUYXNrcyA9IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICB1cmw6IFwiL2FwaS90YXNrcy90ZW1wbGF0ZS9cIiArIGlkLFxuICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yOiBcIiwgZXJyb3IpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLy8vLy8vLy8vLy9cbiAgLy9TY2hlZHVsZWRcbiAgLy8vLy8vLy8vL1xuXG5cbnRoaXMucG9zdFJlY3VycmluZ1Byb2plY3QgPSBmdW5jdGlvbiAobmV3UmVjdXJyaW5nRm9ybSkge1xuICAgIGNvbnNvbGUubG9nKCdGT1JNJywgbmV3UmVjdXJyaW5nRm9ybSk7XG4gICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICB1cmw6IFwiL2FwaS90ZW1wbGF0ZVwiLFxuICAgICAgZGF0YTogbmV3UmVjdXJyaW5nRm9ybVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMucG9zdFNpbmdsZVByb2plY3QgPSBmdW5jdGlvbiAoc2luZ2xlUHJvamVjdCkge1xuICAgIGNvbnNvbGUubG9nKHNpbmdsZVByb2plY3QpO1xuICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG5cbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBcIi9hcGkvc2luZ2xlcHJvamVjdFwiLFxuICAgICAgZGF0YTogc2luZ2xlUHJvamVjdFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGRlZmVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMucG9zdFRyaWdnZXJlZFRlbXBsYXRlID0gZnVuY3Rpb24gKG5ld1RyaWdnZXJlZEZvcm0pIHtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgJGh0dHAoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIHVybDogXCIvYXBpL3RlbXBsYXRlXCIsXG4gICAgICBkYXRhOiBuZXdUcmlnZ2VyZWRGb3JtXG4gICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICBkZWZlci5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHRoaXMuc3RhcnRQcm9qZWN0ID0gZnVuY3Rpb24odGVtcGxhdGVpZCl7XG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgdXJsOiBcIi9hcGkvcHJvamVjdC9cIiArIHRlbXBsYXRlaWRcbiAgICB9KS50aGVuKChyZXMpPT57XG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgfSkuY2F0Y2goKGVycik9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgU1RBUlRJTkcgUFJPSkVDVCFcIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH07XG5cblxuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
