'use strict';

angular.module('terminatorApp').controller('NewSingleProjectCtrl', function ($scope, $state, ProjectsSvc) {

	$scope.test = "The new single project ctrl is working!";

	$scope.newSingleProject = {
		setup: {
			type: "Single"
		}
	};

	$scope.addSingleProject = function (newSingleProject) {
		console.log("This is what I'm sending", newSingleProject);
		ProjectsSvc.postSingleProject(newSingleProject).then(function (results) {
			console.log("New Single Project added", results);
			$scope.templateID = results.data._id;
			console.log($scope.templateID);
			$state.go('dashboard.projectView', { id: results.data._id });
		}).catch(function (err) {
			console.log("Error", err);
		});
	};

	/////////////////////
	//Date Picker
	/////////////////////

	$scope.today = function () {
		$scope.dt = new Date();
	};
	$scope.today();

	$scope.clear = function () {
		$scope.dt = null;
	};

	// Disable weekend selection
	$scope.disabled = function (date, mode) {
		return mode === 'day' && (date.getDay() === 0 || date.getDay() === 6);
	};

	$scope.toggleMin = function () {
		$scope.minDate = $scope.minDate ? null : new Date();
	};

	$scope.toggleMin();
	$scope.maxDate = new Date(2020, 5, 22);

	$scope.open1 = function (event) {
		console.log(event);
		$scope.popup1.opened = true;
	};

	$scope.open2 = function () {
		$scope.popup2.opened = true;
	};

	$scope.open3 = function () {
		$scope.popup3.opened = true;
	};

	$scope.setDate = function (year, month, day) {
		$scope.dt = new Date(year, month, day);
	};

	$scope.dateOptions = {
		formatYear: 'yy',
		startingDay: 1
	};

	$scope.formats = ['dd-MMMM-yyyy', 'yyyy/MM/dd', 'dd.MM.yyyy', 'shortDate'];
	$scope.format = $scope.formats[0];
	$scope.altInputFormats = ['M!/d!/yyyy'];

	$scope.popup1 = {
		opened: false
	};

	$scope.popup2 = {
		opened: false
	};

	$scope.popup3 = {
		opened: false
	};

	var tomorrow = new Date();
	tomorrow.setDate(tomorrow.getDate() + 1);
	var afterTomorrow = new Date();
	afterTomorrow.setDate(tomorrow.getDate() + 1);
	$scope.events = [{
		date: tomorrow,
		status: 'full'
	}, {
		date: afterTomorrow,
		status: 'partially'
	}];

	$scope.getDayClass = function (date, mode) {
		if (mode === 'day') {
			var dayToCheck = new Date(date).setHours(0, 0, 0, 0);

			for (var i = 0; i < $scope.events.length; i++) {
				var currentDay = new Date($scope.events[i].date).setHours(0, 0, 0, 0);

				if (dayToCheck === currentDay) {
					return $scope.events[i].status;
				}
			}
		}

		return '';
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpYy9jb250cm9sbGVycy9OZXdTaW5nbGVQcm9qZWN0Q3RybC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxDQUFDLHNCQUFzQixFQUFFLFVBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUU7O0FBR3hHLE9BQU0sQ0FBQyxJQUFJLEdBQUcseUNBQXlDLENBQUM7O0FBRXhELE9BQU0sQ0FBQyxnQkFBZ0IsR0FBRztBQUN6QixPQUFLLEVBQUU7QUFDTixPQUFJLEVBQUUsUUFBUTtHQUNkO0VBQ0QsQ0FBQzs7QUFFRixPQUFNLENBQUMsZ0JBQWdCLEdBQUcsVUFBVSxnQkFBZ0IsRUFBRTtBQUNyRCxTQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFLGdCQUFnQixDQUFDLENBQUM7QUFDMUQsYUFBVyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsT0FBTyxFQUFFO0FBQ3RFLFVBQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakQsU0FBTSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNyQyxVQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvQixTQUFNLENBQUMsRUFBRSxDQUFDLHVCQUF1QixFQUFFLEVBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztHQUMzRCxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVMsR0FBRyxFQUFFO0FBQ3RCLFVBQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0dBQzFCLENBQUMsQ0FBQztFQUNIOzs7Ozs7QUFBQyxBQVFGLE9BQU0sQ0FBQyxLQUFLLEdBQUcsWUFBVztBQUN0QixRQUFNLENB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OztBQUVOLE9BQU0sQ0FBQyxXQUFXLEdBQUcsVUFBUyxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ3RDLE1BQUksSUFBSSxLQUFLLEtBQUssRUFBRTtBQUNsQixPQUFJLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRWxELFFBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM3QyxRQUFJLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQzs7QUFFbkUsUUFBSSxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQzdCLFlBQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7S0FDaEM7SUFDRjtHQUNGOztBQUVELFNBQU8sRUFBRSxDQUFDO0VBQ2IsQ0FBQztDQUVGLENBQUMsQ0FBQyIsImZpbGUiOiJwdWJsaWMvY29udHJvbGxlcnMvTmV3U2luZ2xlUHJvamVjdEN0cmwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgndGVybWluYXRvckFwcCcpLmNvbnRyb2xsZXIoJ05ld1NpbmdsZVByb2plY3RDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzU3ZjKSB7XG5cblxuXHQkc2NvcGUudGVzdCA9IFwiVGhlIG5ldyBzaW5nbGUgcHJvamVjdCBjdHJsIGlzIHdvcmtpbmchXCI7XG5cblx0JHNjb3BlLm5ld1NpbmdsZVByb2plY3QgPSB7XG5cdFx0c2V0dXA6IHtcblx0XHRcdHR5cGU6IFwiU2luZ2xlXCJcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmFkZFNpbmdsZVByb2plY3QgPSBmdW5jdGlvbiAobmV3U2luZ2xlUHJvamVjdCkge1xuXHRcdGNvbnNvbGUubG9nKFwiVGhpcyBpcyB3aGF0IEknbSBzZW5kaW5nXCIsIG5ld1NpbmdsZVByb2plY3QpO1xuXHRcdFByb2plY3RzU3ZjLnBvc3RTaW5nbGVQcm9qZWN0KG5ld1NpbmdsZVByb2plY3QpLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuXHRcdFx0Y29uc29sZS5sb2coXCJOZXcgU2luZ2xlIFByb2plY3QgYWRkZWRcIiwgcmVzdWx0cyk7XG5cdFx0XHQkc2NvcGUudGVtcGxhdGVJRCA9IHJlc3VsdHMuZGF0YS5faWQ7XG5cdFx0XHRjb25zb2xlLmxvZygkc2NvcGUudGVtcGxhdGVJRCk7XG5cdFx0XHQkc3RhdGUuZ28oJ2Rhc2hib2FyZC5wcm9qZWN0VmlldycsIHtpZDogcmVzdWx0cy5kYXRhLl9pZH0pO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuXHRcdFx0Y29uc29sZS5sb2coXCJFcnJvclwiLCBlcnIpO1xuXHRcdH0pO1xuXHR9O1xuXG5cblxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0Ly9EYXRlIFBpY2tlclxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXHQkc2NvcGUudG9kYXkgPSBmdW5jdGlvbigpIHtcblx0ICAgICRzY29wZS5kdCA9IG5ldyBEYXRlKCk7XG5cdH07XG5cdCRzY29wZS50b2RheSgpO1xuXG5cdCRzY29wZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgJHNjb3BlLmR0ID0gbnVsbDtcblx0fTtcblxuXHQvLyBEaXNhYmxlIHdlZWtlbmQgc2VsZWN0aW9uXG5cdCRzY29wZS5kaXNhYmxlZCA9IGZ1bmN0aW9uKGRhdGUsIG1vZGUpIHtcblx0ICAgIHJldHVybiBtb2RlID09PSAnZGF5JyAmJiAoZGF0ZS5nZXREYXkoKSA9PT0gMCB8fCBkYXRlLmdldERheSgpID09PSA2KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlTWluID0gZnVuY3Rpb24oKSB7XG5cdCAgICAkc2NvcGUubWluRGF0ZSA9ICRzY29wZS5taW5EYXRlID8gbnVsbCA6IG5ldyBEYXRlKCk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZU1pbigpO1xuXHQkc2NvcGUubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMjAsIDUsIDIyKTtcblxuXHQkc2NvcGUub3BlbjEgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgY29uc29sZS5sb2coZXZlbnQpO1xuXHQgICAgJHNjb3BlLnBvcHVwMS5vcGVuZWQgPSB0cnVlO1xuXHR9O1xuXG5cdCRzY29wZS5vcGVuMiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgJHNjb3BlLnBvcHVwMi5vcGVuZWQgPSB0cnVlO1xuXHR9O1xuXG5cdCRzY29wZS5vcGVuMyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgJHNjb3BlLnBvcHVwMy5vcGVuZWQgPSB0cnVlO1xuXHR9O1xuXG5cdCRzY29wZS5zZXREYXRlID0gZnVuY3Rpb24oeWVhciwgbW9udGgsIGRheSkge1xuXHQgICAgJHNjb3BlLmR0ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG5cdH07XG5cblx0JHNjb3BlLmRhdGVPcHRpb25zID0ge1xuXHQgICAgZm9ybWF0WWVhcjogJ3l5Jyxcblx0ICAgIHN0YXJ0aW5nRGF5OiAxXG5cdH07XG5cblx0JHNjb3BlLmZvcm1hdHMgPSBbJ2RkLU1NTU0teXl5eScsICd5eXl5L01NL2RkJywgJ2RkLk1NLnl5eXknLCAnc2hvcnREYXRlJ107XG5cdCRzY29wZS5mb3JtYXQgPSAkc2NvcGUuZm9ybWF0c1swXTtcblx0JHNjb3BlLmFsdElucHV0Rm9ybWF0cyA9IFsnTSEvZCEveXl5eSddO1xuXG5cblx0JHNjb3BlLnBvcHVwMSA9IHtcblx0ICAgIG9wZW5lZDogZmFsc2Vcblx0fTtcblxuXHQkc2NvcGUucG9wdXAyID0ge1xuXHQgICAgb3BlbmVkOiBmYWxzZVxuXHR9O1xuXG5cdCRzY29wZS5wb3B1cDMgPSB7XG5cdCAgICBvcGVuZWQ6IGZhbHNlXG5cdH07XG5cblx0dmFyIHRvbW9ycm93ID0gbmV3IERhdGUoKTtcblx0dG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcblx0dmFyIGFmdGVyVG9tb3Jyb3cgPSBuZXcgRGF0ZSgpO1xuXHRhZnRlclRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG5cdCRzY29wZS5ldmVudHMgPVxuXHQgICAgW1xuXHQgICAgICB7XG5cdCAgICAgICAgZGF0ZTogdG9tb3Jyb3csXG5cdCAgICAgICAgc3RhdHVzOiAnZnVsbCdcblx0ICAgICAgfSxcblx0ICAgICAge1xuXHQgICAgICAgIGRhdGU6IGFmdGVyVG9tb3Jyb3csXG5cdCAgICAgICAgc3RhdHVzOiAncGFydGlhbGx5J1xuXHQgICAgICB9XG5cdCAgICBdO1xuXG5cdCRzY29wZS5nZXREYXlDbGFzcyA9IGZ1bmN0aW9uKGRhdGUsIG1vZGUpIHtcblx0ICAgIGlmIChtb2RlID09PSAnZGF5Jykge1xuXHQgICAgICB2YXIgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuXG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBjdXJyZW50RGF5ID0gbmV3IERhdGUoJHNjb3BlLmV2ZW50c1tpXS5kYXRlKS5zZXRIb3VycygwLDAsMCwwKTtcblxuXHQgICAgICAgIGlmIChkYXlUb0NoZWNrID09PSBjdXJyZW50RGF5KSB7XG5cdCAgICAgICAgICByZXR1cm4gJHNjb3BlLmV2ZW50c1tpXS5zdGF0dXM7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiAnJztcblx0fTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
