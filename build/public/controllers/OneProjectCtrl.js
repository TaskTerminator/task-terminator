'use strict';

angular.module('terminatorApp').controller('OneProjectCtrl', function ($scope, resolveProject, resolveCompany) {

  $scope.isSingle = "";
  $scope.showForm = false;

  $scope.project = resolveProject.data;
  console.log(resolveProject);
  console.log($scope.project);

  $scope.company = resolveCompany.data;

  $scope.departments = $scope.company.departments;
  $scope.positions = $scope.company.positions;
  $scope.employees = $scope.company.employees;
  $scope.choices = ["Specific Department", "Specific Position", "Specific Person"];

  $scope.friendlyInterval = "";
  $scope.friendlyFreq = "";

  var project = $scope.project;

  $scope.departmentsArr = [];
  $scope.positionsArr = [];
  $scope.employeesArr = [];

  (function departmentsArr() {
    for (var i = 0; i < $scope.departments.length; i++) {
      $scope.departmentsArr.push($scope.departments[i].name);
    }
    return $scope.departmentsArr;
  })();

  (function positionsArr() {
    for (var i = 0; i < $scope.positions.length; i++) {
      $scope.positionsArr.push($scope.positions[i].name);
    }
    return $scope.positionsArr;
  })();

  (function employeesArr() {
    for (var i = 0; i < $scope.employees.length; i++) {
      $scope.employeesArr.push($scope.employees[i].identification.name.fullName);
    }
    return $scope.employeesArr;
  })();

  $scope.getIntervalName = function (project) {
    var link = project.setup.interval.type;
    var pink = project.setup.interval;
    if (link === "Daily") {
      $scope.friendlyInterval = "Daily";
    } else if (link === "Daily Business Days") {
      $scope.friendlyInterval = "Every Business Day";
    } else if (link === "Weekly") {
      $scope.friendlyInterval = "Every Week";
      $scope.friendlyFreq = pink.weeklyInterval;
    } else if (link === "Bi-Weekly") {
      $scope.friendlyInterval = "Every Other Week";
      $scope.friendlyFreq = pink.weeklyInterval;
    } else if (link === "Monthly") {
      $scope.friendlyInterval = "Every Month";
      console.log("SELECTION", pink.monthlyInterval.selection);
      if (pink.monthlyInterval.selection == "# of Days From Start") {
        $scope.friendlyFreq = pink.monthlyInterval.fromBeginning + " days after the beginning of the month";
        console.log("Stephens fault", pink.monthlyInterval.fromBeginning);
      } else if (pink.monthlyInterval.selection == "# of Days Before End") {
        $scope.friendlyFreq = pink.monthlyInterval.fromEnd + " days before the end of the month";
      } else if (pink.monthlyInterval.selection == "First Day of Month") {
        $scope.friendlyFreq = "First Day of the Month";
      } else if (pink.monthlyInterval.selection == "Last Day of Month") {
        $scope.friendlyFreq = "Last Day of the Month";
      }
    } else if (link === "Annually") {
      $scope.friendlyInterval = "Every Year";
      if (pink.annualInterval.selection === "# of Days From Start") {
        $scope.friendlyFreq = pink.annualInterval.fromBeginning + " days after the beginning of the year. ";
      } else if (pink.annualInterval.selection === "# of Days Before end") {
        $scope.friendlyFreq = pink.annualInterval.fromEnd + " days before the end of the year";
      } else if (pink.annualInterval.selection === "First Day of the Year") {
        $scope.friendlyFreq = "First Day of the Year";
      } else if (pink.annualInterval.selection === "Last Day of the Year") {
        $scope.friendlyFreq = "Last Day of the Year";
      } else if (pink.annualInterval.selection === "Any Day of the Year") {
        $scope.friendlyFreq = "Any Day of the Year";
      } else if (pink.annualInterval.selection === "In a Particular Month") {
        $scope.friendlyFreq = "Every " + pink.annualInterval.selectMonth;
      } else if (pink.annualInterval.selection === "In a Particular Quarter") {
        var ending;
        if (pink.annualInverval.selectQuarter === 1) {
          ending = "st";
        } else if (pink.annualInverval.selectQuarter === 2) {
          ending = "nd";
        } else if (pink.annualInverval.selectQuarter === 3) {
          ending = "rd";
        } else if (pink.annualInverval.selectQuarter === 4) {
          ending = "th";
        }
        $scope.friendlyFreq = "Every " + pink.annualInterval.selectQuarter + ending;
      }
    } else if (link === "Quarterly") {
      $scope.friendlyInterval = "Every Quarter";
      if (pink.quarterlyInterval.selection === "First Day of the Quarter") {
        $scope.friendlyFreq = "The First Day of the Quarter";
      } else if (pink.quarterlyInterval.selection === "Last Day of the Quarter") {
        $scope.friendlyFreq = "The Last Day of the Quarter";
      } else if (pink.quarterlyInterval.selection === "# Days from Start") {
        $scope.friendlyFreq = pink.quarterlyInterval.fromBeginning + " days after the beginning of the quarter";
      } else if (pink.quarterlyInterval.selection === "# Days from End") {
        $scope.friendlyFreq = pink.quarterlyInterval.fromEnd + " days after the beginning of the quarter";
      } else if (pink.quarterlyInterval.selection === "Any") {
        $scope.friendlyFreq = "Any day of the quarter";
      }
    }
  };

  if (project.setup.type !== "Single") {
    $scope.getIntervalName(project);
    $scope.isSingle = false;
  } else {
    $scope.isSingle = true;
    $scope.friendlyInterval = "Specific Date";
    $scope.friendlyFreq = project.setup.dueDate.actual;
  }

  console.log("friendlyInterval", $scope.friendlyInterval);
  console.log("friendlyFreq", $scope.friendlyFreq);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1YmxpYy9jb250cm9sbGVycy9PbmVQcm9qZWN0Q3RybC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLFVBQVMsTUFBTSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUU7O0FBRTVHLFFBQU0sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLFFBQU0sQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDOztBQUV4QixRQUFNLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7QUFDckMsU0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM1QixTQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFNUIsUUFBTSxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDOztBQUVyQyxRQUFNLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ2hELFFBQU0sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDNUMsUUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUM1QyxRQUFNLENBQUMsT0FBTyxHQUFHLENBQUMscUJBQXFCLEVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCLENBQUMsQ0FBQzs7QUFFakYsUUFBTSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztBQUM3QixRQUFNLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQzs7QUFFekIsTUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQzs7QUFFN0IsUUFBTSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7QUFDM0IsUUFBTSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDekIsUUFBTSxDQUFDLFlBQVksR0FB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QUFpQixDQUFDLGFBQWEsR0FBRywwQ0FBMEMsQ0FBQztPQUN6RyxNQUFNLElBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsS0FBSyxpQkFBaUIsRUFBQztBQUMvRCxjQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsMENBQTBDLENBQUM7T0FDbkcsTUFBTSxJQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEtBQUssS0FBSyxFQUFDO0FBQ25ELGNBQU0sQ0FBQyxZQUFZLEdBQUcsd0JBQXdCLENBQUM7T0FDaEQ7S0FDSjtHQUNGLENBQUM7O0FBT0gsTUFBRyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUM7QUFDakMsVUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNoQyxVQUFNLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztHQUN6QixNQUFPO0FBQ04sVUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDdkIsVUFBTSxDQUFDLGdCQUFnQixHQUFHLGVBQWUsQ0FBQztBQUMxQyxVQUFNLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztHQUNwRDs7QUFFRixTQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3pELFNBQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztDQUVqRCxDQUFDLENBQUMiLCJmaWxlIjoicHVibGljL2NvbnRyb2xsZXJzL09uZVByb2plY3RDdHJsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3Rlcm1pbmF0b3JBcHAnKS5jb250cm9sbGVyKCdPbmVQcm9qZWN0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgcmVzb2x2ZVByb2plY3QsIHJlc29sdmVDb21wYW55KSB7XG5cbiAgJHNjb3BlLmlzU2luZ2xlID0gXCJcIjtcbiAgJHNjb3BlLnNob3dGb3JtID0gZmFsc2U7XG5cbiAgJHNjb3BlLnByb2plY3QgPSByZXNvbHZlUHJvamVjdC5kYXRhO1xuICBjb25zb2xlLmxvZyhyZXNvbHZlUHJvamVjdCk7XG4gIGNvbnNvbGUubG9nKCRzY29wZS5wcm9qZWN0KTtcblxuICAkc2NvcGUuY29tcGFueSA9IHJlc29sdmVDb21wYW55LmRhdGE7XG5cbiAgJHNjb3BlLmRlcGFydG1lbnRzID0gJHNjb3BlLmNvbXBhbnkuZGVwYXJ0bWVudHM7XG4gICRzY29wZS5wb3NpdGlvbnMgPSAkc2NvcGUuY29tcGFueS5wb3NpdGlvbnM7XG4gICRzY29wZS5lbXBsb3llZXMgPSAkc2NvcGUuY29tcGFueS5lbXBsb3llZXM7XG4gICRzY29wZS5jaG9pY2VzID0gW1wiU3BlY2lmaWMgRGVwYXJ0bWVudFwiLCBcIlNwZWNpZmljIFBvc2l0aW9uXCIsIFwiU3BlY2lmaWMgUGVyc29uXCJdO1xuXG4gICRzY29wZS5mcmllbmRseUludGVydmFsID0gXCJcIjtcbiAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IFwiXCI7XG5cbiAgdmFyIHByb2plY3QgPSAkc2NvcGUucHJvamVjdDtcblxuICAkc2NvcGUuZGVwYXJ0bWVudHNBcnIgPSBbXTtcbiAgJHNjb3BlLnBvc2l0aW9uc0FyciA9IFtdO1xuICAkc2NvcGUuZW1wbG95ZWVzQXJyID0gW107XG5cbiAgKGZ1bmN0aW9uIGRlcGFydG1lbnRzQXJyKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGk8JHNjb3BlLmRlcGFydG1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAkc2NvcGUuZGVwYXJ0bWVudHNBcnIucHVzaCgkc2NvcGUuZGVwYXJ0bWVudHNbaV0ubmFtZSk7XG4gICAgfVxuICAgIHJldHVybiAkc2NvcGUuZGVwYXJ0bWVudHNBcnI7XG4gIH0pKCk7XG5cbiAgKGZ1bmN0aW9uIHBvc2l0aW9uc0FycigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpPCRzY29wZS5wb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICRzY29wZS5wb3NpdGlvbnNBcnIucHVzaCgkc2NvcGUucG9zaXRpb25zW2ldLm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gJHNjb3BlLnBvc2l0aW9uc0FycjtcbiAgfSkoKTtcblxuICAoZnVuY3Rpb24gZW1wbG95ZWVzQXJyKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGk8JHNjb3BlLmVtcGxveWVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgJHNjb3BlLmVtcGxveWVlc0Fyci5wdXNoKCRzY29wZS5lbXBsb3llZXNbaV0uaWRlbnRpZmljYXRpb24ubmFtZS5mdWxsTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiAkc2NvcGUuZW1wbG95ZWVzQXJyO1xuICB9KSgpO1xuXG5cbiAgJHNjb3BlLmdldEludGVydmFsTmFtZSA9IGZ1bmN0aW9uKHByb2plY3Qpe1xuICAgIHZhciBsaW5rID0gcHJvamVjdC5zZXR1cC5pbnRlcnZhbC50eXBlO1xuICAgIHZhciBwaW5rID0gcHJvamVjdC5zZXR1cC5pbnRlcnZhbDtcbiAgICBpZihsaW5rID09PSBcIkRhaWx5XCIpe1xuICAgICAgJHNjb3BlLmZyaWVuZGx5SW50ZXJ2YWwgPSBcIkRhaWx5XCI7XG4gICAgfSBlbHNlIGlmIChsaW5rID09PSBcIkRhaWx5IEJ1c2luZXNzIERheXNcIil7XG4gICAgICAkc2NvcGUuZnJpZW5kbHlJbnRlcnZhbCA9IFwiRXZlcnkgQnVzaW5lc3MgRGF5XCI7XG4gICAgfSBlbHNlIGlmKCBsaW5rID09PSBcIldlZWtseVwiKXtcbiAgICAgICRzY29wZS5mcmllbmRseUludGVydmFsID0gXCJFdmVyeSBXZWVrXCI7XG4gICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gcGluay53ZWVrbHlJbnRlcnZhbDtcbiAgICB9IGVsc2UgaWYobGluayA9PT0gXCJCaS1XZWVrbHlcIikge1xuICAgICAgJHNjb3BlLmZyaWVuZGx5SW50ZXJ2YWwgPSBcIkV2ZXJ5IE90aGVyIFdlZWtcIjtcbiAgICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBwaW5rLndlZWtseUludGVydmFsO1xuICAgIH0gZWxzZSBpZihsaW5rID09PSBcIk1vbnRobHlcIikge1xuICAgICAgJHNjb3BlLmZyaWVuZGx5SW50ZXJ2YWwgPSBcIkV2ZXJ5IE1vbnRoXCI7XG4gICAgICBjb25zb2xlLmxvZyhcIlNFTEVDVElPTlwiLCBwaW5rLm1vbnRobHlJbnRlcnZhbC5zZWxlY3Rpb24pO1xuICAgICAgICAgIGlmKHBpbmsubW9udGhseUludGVydmFsLnNlbGVjdGlvbiA9PSBcIiMgb2YgRGF5cyBGcm9tIFN0YXJ0XCIpe1xuICAgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IHBpbmsubW9udGhseUludGVydmFsLmZyb21CZWdpbm5pbmcgKyBcIiBkYXlzIGFmdGVyIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG1vbnRoXCI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0ZXBoZW5zIGZhdWx0XCIsIHBpbmsubW9udGhseUludGVydmFsLmZyb21CZWdpbm5pbmcpO1xuICAgICAgICAgIH0gZWxzZSBpZihwaW5rLm1vbnRobHlJbnRlcnZhbC5zZWxlY3Rpb24gPT0gXCIjIG9mIERheXMgQmVmb3JlIEVuZFwiKXtcbiAgICAgICAgICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBwaW5rLm1vbnRobHlJbnRlcnZhbC5mcm9tRW5kICsgXCIgZGF5cyBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgbW9udGhcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHBpbmsubW9udGhseUludGVydmFsLnNlbGVjdGlvbiA9PSBcIkZpcnN0IERheSBvZiBNb250aFwiKXtcbiAgICAgICAgICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBcIkZpcnN0IERheSBvZiB0aGUgTW9udGhcIjtcbiAgICAgICAgICB9IGVsc2UgaWYocGluay5tb250aGx5SW50ZXJ2YWwuc2VsZWN0aW9uID09IFwiTGFzdCBEYXkgb2YgTW9udGhcIikge1xuICAgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IFwiTGFzdCBEYXkgb2YgdGhlIE1vbnRoXCI7XG4gICAgICAgICAgfVxuICAgIH0gZWxzZSBpZihsaW5rID09PSBcIkFubnVhbGx5XCIpIHtcbiAgICAgICRzY29wZS5mcmllbmRseUludGVydmFsID0gXCJFdmVyeSBZZWFyXCI7XG4gICAgICAgICAgaWYocGluay5hbm51YWxJbnRlcnZhbC5zZWxlY3Rpb24gPT09IFwiIyBvZiBEYXlzIEZyb20gU3RhcnRcIil7XG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gcGluay5hbm51YWxJbnRlcnZhbC5mcm9tQmVnaW5uaW5nICsgXCIgZGF5cyBhZnRlciB0aGUgYmVnaW5uaW5nIG9mIHRoZSB5ZWFyLiBcIjtcbiAgICAgICAgICB9IGVsc2UgaWYocGluay5hbm51YWxJbnRlcnZhbC5zZWxlY3Rpb24gPT09IFwiIyBvZiBEYXlzIEJlZm9yZSBlbmRcIil7XG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gcGluay5hbm51YWxJbnRlcnZhbC5mcm9tRW5kICsgXCIgZGF5cyBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgeWVhclwiO1xuICAgICAgICAgIH0gZWxzZSBpZihwaW5rLmFubnVhbEludGVydmFsLnNlbGVjdGlvbiA9PT0gXCJGaXJzdCBEYXkgb2YgdGhlIFllYXJcIil7XG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gXCJGaXJzdCBEYXkgb2YgdGhlIFllYXJcIjtcbiAgICAgICAgICB9IGVsc2UgaWYocGluay5hbm51YWxJbnRlcnZhbC5zZWxlY3Rpb24gPT09IFwiTGFzdCBEYXkgb2YgdGhlIFllYXJcIil7XG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gXCJMYXN0IERheSBvZiB0aGUgWWVhclwiO1xuICAgICAgICAgIH0gZWxzZSBpZihwaW5rLmFubnVhbEludGVydmFsLnNlbGVjdGlvbiA9PT0gXCJBbnkgRGF5IG9mIHRoZSBZZWFyXCIpe1xuICAgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IFwiQW55IERheSBvZiB0aGUgWWVhclwiO1xuICAgICAgICAgIH0gZWxzZSBpZihwaW5rLmFubnVhbEludGVydmFsLnNlbGVjdGlvbiA9PT0gXCJJbiBhIFBhcnRpY3VsYXIgTW9udGhcIil7XG4gICAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gXCJFdmVyeSBcIiArIHBpbmsuYW5udWFsSW50ZXJ2YWwuc2VsZWN0TW9udGg7XG4gICAgICAgICAgfSBlbHNlIGlmKHBpbmsuYW5udWFsSW50ZXJ2YWwuc2VsZWN0aW9uID09PSBcIkluIGEgUGFydGljdWxhciBRdWFydGVyXCIpe1xuICAgICAgICAgICAgICB2YXIgZW5kaW5nO1xuICAgICAgICAgICAgaWYocGluay5hbm51YWxJbnZlcnZhbC5zZWxlY3RRdWFydGVyID09PSAxKXtcbiAgICAgICAgICAgICAgZW5kaW5nID0gXCJzdFwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHBpbmsuYW5udWFsSW52ZXJ2YWwuc2VsZWN0UXVhcnRlciA9PT0gMil7XG4gICAgICAgICAgICAgIGVuZGluZyA9IFwibmRcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZihwaW5rLmFubnVhbEludmVydmFsLnNlbGVjdFF1YXJ0ZXIgPT09IDMpe1xuICAgICAgICAgICAgICBlbmRpbmcgPSBcInJkXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYocGluay5hbm51YWxJbnZlcnZhbC5zZWxlY3RRdWFydGVyID09PSA0KXtcbiAgICAgICAgICAgICAgZW5kaW5nID0gXCJ0aFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IFwiRXZlcnkgXCIgKyBwaW5rLmFubnVhbEludGVydmFsLnNlbGVjdFF1YXJ0ZXIgKyBlbmRpbmc7XG4gICAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGluayA9PT0gXCJRdWFydGVybHlcIil7XG5cdCAgICAgICRzY29wZS5mcmllbmRseUludGVydmFsID0gXCJFdmVyeSBRdWFydGVyXCI7XG5cdCAgICAgICAgaWYocGluay5xdWFydGVybHlJbnRlcnZhbC5zZWxlY3Rpb24gPT09IFwiRmlyc3QgRGF5IG9mIHRoZSBRdWFydGVyXCIpe1xuXHQgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IFwiVGhlIEZpcnN0IERheSBvZiB0aGUgUXVhcnRlclwiO1xuXHQgICAgICAgIH0gZWxzZSBpZihwaW5rLnF1YXJ0ZXJseUludGVydmFsLnNlbGVjdGlvbiA9PT0gXCJMYXN0IERheSBvZiB0aGUgUXVhcnRlclwiKXtcblx0ICAgICAgICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBcIlRoZSBMYXN0IERheSBvZiB0aGUgUXVhcnRlclwiO1xuXHQgICAgICAgIH0gZWxzZSBpZihwaW5rLnF1YXJ0ZXJseUludGVydmFsLnNlbGVjdGlvbiA9PT0gXCIjIERheXMgZnJvbSBTdGFydFwiKXtcblx0ICAgICAgICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBwaW5rLnF1YXJ0ZXJseUludGVydmFsLmZyb21CZWdpbm5pbmcgKyBcIiBkYXlzIGFmdGVyIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHF1YXJ0ZXJcIjtcblx0ICAgICAgICB9IGVsc2UgaWYocGluay5xdWFydGVybHlJbnRlcnZhbC5zZWxlY3Rpb24gPT09IFwiIyBEYXlzIGZyb20gRW5kXCIpe1xuXHQgICAgICAgICAgJHNjb3BlLmZyaWVuZGx5RnJlcSA9IHBpbmsucXVhcnRlcmx5SW50ZXJ2YWwuZnJvbUVuZCArIFwiIGRheXMgYWZ0ZXIgdGhlIGJlZ2lubmluZyBvZiB0aGUgcXVhcnRlclwiO1xuXHQgICAgICAgIH0gZWxzZSBpZihwaW5rLnF1YXJ0ZXJseUludGVydmFsLnNlbGVjdGlvbiA9PT0gXCJBbnlcIil7XG5cdCAgICAgICAgICAkc2NvcGUuZnJpZW5kbHlGcmVxID0gXCJBbnkgZGF5IG9mIHRoZSBxdWFydGVyXCI7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuICBcdH07XG5cblxuXG5cblxuXG4gIGlmKHByb2plY3Quc2V0dXAudHlwZSAhPT0gXCJTaW5nbGVcIil7XG4gICAgJHNjb3BlLmdldEludGVydmFsTmFtZShwcm9qZWN0KTtcbiAgICAkc2NvcGUuaXNTaW5nbGUgPSBmYWxzZTtcbiAgfSAgZWxzZSB7XG4gICAgJHNjb3BlLmlzU2luZ2xlID0gdHJ1ZTtcbiAgICAkc2NvcGUuZnJpZW5kbHlJbnRlcnZhbCA9IFwiU3BlY2lmaWMgRGF0ZVwiO1xuICAgICRzY29wZS5mcmllbmRseUZyZXEgPSBwcm9qZWN0LnNldHVwLmR1ZURhdGUuYWN0dWFsO1xuICB9XG5cblx0Y29uc29sZS5sb2coXCJmcmllbmRseUludGVydmFsXCIsICRzY29wZS5mcmllbmRseUludGVydmFsKTtcblx0Y29uc29sZS5sb2coXCJmcmllbmRseUZyZXFcIiwgJHNjb3BlLmZyaWVuZGx5RnJlcSk7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
