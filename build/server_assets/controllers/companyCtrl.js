'use strict';

var mongoose = require('mongoose');
var Company = require('../models/Company.js');

module.exports = {
	allCompanies: function allCompanies(req, res) {
		Company.find().populate('departments').populate('positions').populate('employees').exec().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			console.log(err);
			return res.status(500).end();
		});
	},
	newCompany: function newCompany(req, res) {
		var company = new Company(req.body);
		company.save().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			return res.status(500).end();
		});
	},
	getOneCompany: function getOneCompany(req, res) {
		console.log(req.params.id);
		Company.findById({ _id: req.params.id }).populate('departments').populate('positions').populate('employees').exec().then(function (result) {
			return res.json(result);
		}).catch(function (err) {
			console.log(err.message);
			return res.status(500).end();
		});
	}
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlcl9hc3NldHMvY29udHJvbGxlcnMvY29tcGFueUN0cmwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDckMsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7O0FBRWhELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFFaEIsYUFBWSx3QkFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO0FBQ3RCLFNBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FDYixRQUFRLENBQUMsYUFBYSxDQUFDLENBQ3ZCLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FDckIsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUNyQixJQUFJLEVBQUUsQ0FDTixJQUFJLENBQUMsVUFBQyxNQUFNLEVBQUs7QUFDakIsVUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3hCLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDakIsVUFBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNqQixVQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7R0FDN0IsQ0FBQyxDQUFDO0VBQ0g7QUFFRCxXQUFVLHNCQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDcEIsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RDLFNBQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBQyxNQUFNLEVBQUs7QUFDL0IsVUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3hCLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDakIsVUFBTyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0dBQzdCLENBQUMsQ0FBQztFQUNIO0FBRUQsY0FBYSx5QkFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDO0FBQ3JCLFNBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMzQixTQUFPLENBQUMsUUFBUSxDQUFDLEVBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFDLENBQUMsQ0FDckMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUN2QixRQUFRLENBQUMsV0FBVyxDQUFDLENBQ3JCLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FDckIsSUFBSSxFQUFFLENBQ04sSUFBSSxDQUFDLFVBQUMsTUFBTSxFQUFLO0FBQ2pCLFVBQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztHQUN4QixDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsR0FBRyxFQUFJO0FBQ2hCLFVBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQ3hCLFVBQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztHQUM3QixDQUFDLENBQUM7RUFFSDtDQUVELENBQUMiLCJmaWxlIjoic2VydmVyX2Fzc2V0cy9jb250cm9sbGVycy9jb21wYW55Q3RybC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IENvbXBhbnkgPSByZXF1aXJlKCcuLi9tb2RlbHMvQ29tcGFueS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuXHRhbGxDb21wYW5pZXMocmVxLCByZXMpIHtcblx0XHRDb21wYW55LmZpbmQoKVxuXHRcdC5wb3B1bGF0ZSgnZGVwYXJ0bWVudHMnKVxuXHRcdC5wb3B1bGF0ZSgncG9zaXRpb25zJylcblx0XHQucG9wdWxhdGUoJ2VtcGxveWVlcycpXG5cdFx0LmV4ZWMoKVxuXHRcdC50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdHJldHVybiByZXMuanNvbihyZXN1bHQpO1xuXHRcdH0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKGVycik7XG5cdFx0XHRyZXR1cm4gcmVzLnN0YXR1cyg1MDApLmVuZCgpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdG5ld0NvbXBhbnkocmVxLCByZXMpIHtcblx0XHRjb25zdCBjb21wYW55ID0gbmV3IENvbXBhbnkocmVxLmJvZHkpO1xuXHRcdGNvbXBhbnkuc2F2ZSgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0cmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XG5cdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5lbmQoKTtcblx0XHR9KTtcblx0fSxcblxuXHRnZXRPbmVDb21wYW55KHJlcSxyZXMpe1xuXHRcdGNvbnNvbGUubG9nKHJlcS5wYXJhbXMuaWQpO1xuXHRcdENvbXBhbnkuZmluZEJ5SWQoe19pZDogcmVxLnBhcmFtcy5pZH0pXG5cdFx0LnBvcHVsYXRlKCdkZXBhcnRtZW50cycpXG5cdFx0LnBvcHVsYXRlKCdwb3NpdGlvbnMnKVxuXHRcdC5wb3B1bGF0ZSgnZW1wbG95ZWVzJylcblx0XHQuZXhlYygpXG5cdFx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0cmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XG5cdFx0fSkuY2F0Y2goKGVycik9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnIubWVzc2FnZSlcblx0XHRcdHJldHVybiByZXMuc3RhdHVzKDUwMCkuZW5kKCk7XG5cdFx0fSk7XG5cblx0fVxuXG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
